<html><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><title>Chapter 23. Localization &lt;locale.h></title><link href="../css/bootstrap.css" rel="stylesheet" type="text/css"/><link href="../css/style.css" rel="stylesheet" type="text/css"/><meta content="DocBook XSL-NS Stylesheets V1.76.1" name="generator"/><link href="../index.html" rel="home" title="C Programming with C99"/><link href="../index.html" rel="up" title="C Programming with C99"/><link href="../limits/index.html" rel="prev" title="Chapter 22. Sizes of integer types &lt;limits.h>"/><link href="../math/index.html" rel="next" title="Chapter 24. Mathematics &lt;math.h>"/><script src="/css/jquery.js" type="text/javascript" xmlns:d="http://docbook.org/ns/docbook" xmlns:exsl="http://exslt.org/common" xmlns:fo="http://www.w3.org/1999/XSL/Format"></script><script src="/css/bootstrap.js" type="text/javascript" xmlns:d="http://docbook.org/ns/docbook" xmlns:exsl="http://exslt.org/common" xmlns:fo="http://www.w3.org/1999/XSL/Format"></script><script src="/css/analytics.js" type="text/javascript" xmlns:d="http://docbook.org/ns/docbook" xmlns:exsl="http://exslt.org/common" xmlns:fo="http://www.w3.org/1999/XSL/Format"></script></head><body alink="#0000FF" bgcolor="white" link="#0000FF" text="black" vlink="#840084"><div id="navbar" class="navbar navbar-fixed-top">    <div class="navbar-inner">      <div class="container-fluid">      <a class="brand" href="http://libreprogramming.org/">Home</a>      <a class="brand" href="http://libreprogramming.org/books/">Books</a>  <ul class="nav">  <li class="dropdown">      <a href="#"            class="dropdown-toggle"            data-toggle="dropdown">Chapter 23. Localization &lt;locale.h><b class="caret"></b>      </a>      <ul class="dropdown-menu"><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="index.html#idp2602192">23.1. Locale Control</a></span></dt><dd><dl><dt><span class="sect2"><a href="index.html#idp2602928">23.1.1. The setlocale function</a></span></dt></dl></dd><dt><span class="sect1"><a href="index.html#idp2050544">23.2. Numeric formatting convention inquiry</a></span></dt><dd><dl><dt><span class="sect2"><a href="index.html#idp2051296">23.2.1. The localeconv function</a></span></dt></dl></dd></dl></div>     </ul>    </li>  </ul> <ul class="nav"><li><a href="../limits/index.html">&lt;&lt; Chapter 22. Sizes of integer types &lt;limits.h> </a><li><li><a href="../math/index.html"> Chapter 24. Mathematics &lt;math.h> >></a><li></ul>    </div>    </div>  </div><div class="navheader"><table summary="Navigation header" width="100%"><tr><th align="center" colspan="3">Chapter 23. Localization &lt;locale.h></th></tr><tr><td align="left" width="20%"><a accesskey="p" href="../limits/index.html">Prev</a> </td><th align="center" width="60%"> </th><td align="right" width="20%"> <a accesskey="n" href="../math/index.html">Next</a></td></tr></table><hr/></div><div class="chapter" title="Chapter 23. Localization &lt;locale.h>"><div class="titlepage"><div><div><h2 class="title"><a name="idp2405184"></a>Chapter 23. Localization &lt;locale.h></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="index.html#idp2602192">23.1. Locale Control</a></span></dt><dd><dl><dt><span class="sect2"><a href="index.html#idp2602928">23.1.1. The setlocale function</a></span></dt></dl></dd><dt><span class="sect1"><a href="index.html#idp2050544">23.2. Numeric formatting convention inquiry</a></span></dt><dd><dl><dt><span class="sect2"><a href="index.html#idp2051296">23.2.1. The localeconv function</a></span></dt></dl></dd></dl></div><p>The header &lt;locale.h> declares two functions, one type, and
    defines several macros.</p><p>The type is</p><pre class="CLexer"><div class="highlight"><pre><span class="k">struct</span> <span class="n">lconv</span>
</pre></div>
</pre><p>which contains members related to the formatting of numeric
    values. The structure shall contain at least the following members, in any
    order. The semantics of the members and their normal ranges are explained
    in The localeconv function. In the "C" locale, the members shall have the
    values specified in the comments.</p><pre class="CLexer"><div class="highlight"><pre><span class="kt">char</span> <span class="o">*</span><span class="n">decimal_point</span><span class="p">;</span>     <span class="c1">// &quot;.&quot;</span>
<span class="kt">char</span> <span class="o">*</span><span class="n">thousands_sep</span><span class="p">;</span>     <span class="c1">// &quot;&quot;</span>
<span class="kt">char</span> <span class="o">*</span><span class="n">grouping</span><span class="p">;</span>          <span class="c1">// &quot;&quot;</span>
<span class="kt">char</span> <span class="o">*</span><span class="n">mon_decimal_point</span><span class="p">;</span> <span class="c1">// &quot;&quot;</span>
<span class="kt">char</span> <span class="o">*</span><span class="n">mon_thousands_sep</span><span class="p">;</span> <span class="c1">// &quot;&quot;</span>
<span class="kt">char</span> <span class="o">*</span><span class="n">mon_grouping</span><span class="p">;</span>      <span class="c1">// &quot;&quot;</span>
<span class="kt">char</span> <span class="o">*</span><span class="n">positive_sign</span><span class="p">;</span>     <span class="c1">// &quot;&quot;</span>
<span class="kt">char</span> <span class="o">*</span><span class="n">negative_sign</span><span class="p">;</span>     <span class="c1">// &quot;&quot;</span>
<span class="kt">char</span> <span class="o">*</span><span class="n">currency_symbol</span><span class="p">;</span>   <span class="c1">// &quot;&quot;</span>
<span class="kt">char</span> <span class="n">frac_digits</span><span class="p">;</span>        <span class="c1">// CHAR_MAX</span>
<span class="kt">char</span> <span class="n">p_cs_precedes</span><span class="p">;</span>      <span class="c1">// CHAR_MAX</span>
<span class="kt">char</span> <span class="n">n_cs_precedes</span><span class="p">;</span>      <span class="c1">// CHAR_MAX</span>
<span class="kt">char</span> <span class="n">p_sep_by_space</span><span class="p">;</span>     <span class="c1">// CHAR_MAX</span>
<span class="kt">char</span> <span class="n">n_sep_by_space</span><span class="p">;</span>     <span class="c1">// CHAR_MAX</span>
<span class="kt">char</span> <span class="n">p_sign_posn</span><span class="p">;</span>        <span class="c1">// CHAR_MAX</span>
<span class="kt">char</span> <span class="n">n_sign_posn</span><span class="p">;</span>        <span class="c1">// CHAR_MAX</span>
<span class="kt">char</span> <span class="o">*</span><span class="n">int_curr_symbol</span><span class="p">;</span>   <span class="c1">// &quot;&quot;</span>
<span class="kt">char</span> <span class="n">int_frac_digits</span><span class="p">;</span>    <span class="c1">// CHAR_MAX</span>
<span class="kt">char</span> <span class="n">int_p_cs_precedes</span><span class="p">;</span>  <span class="c1">// CHAR_MAX</span>
<span class="kt">char</span> <span class="n">int_n_cs_precedes</span><span class="p">;</span>  <span class="c1">// CHAR_MAX</span>
<span class="kt">char</span> <span class="n">int_p_sep_by_space</span><span class="p">;</span> <span class="c1">// CHAR_MAX</span>
<span class="kt">char</span> <span class="n">int_n_sep_by_space</span><span class="p">;</span> <span class="c1">// CHAR_MAX</span>
<span class="kt">char</span> <span class="n">int_p_sign_posn</span><span class="p">;</span>    <span class="c1">// CHAR_MAX</span>
<span class="kt">char</span> <span class="n">int_n_sign_posn</span><span class="p">;</span>    <span class="c1">// CHAR_MAX</span>
</pre></div>
</pre><p>The macros defined are NULL (described in Common definitions
&lt;stddef.h>); and</p><div class="blockquote"><blockquote class="blockquote"><p>LC_ALL</p><p>LC_COLLATE</p><p>LC_CTYPE</p><p>LC_MONETARY</p><p>LC_NUMERIC</p><p>LC_TIME</p></blockquote></div><p>which expand to integer constant expressions with distinct values,
suitable for use as the first argument to the setlocale
function.<sup>[<a class="footnote" href="#ftn.idp2600992" name="idp2600992">165</a>]</sup>
Additional macro definitions, beginning with the characters
<code class="code">LC_</code> and an uppercase letter.</p><div class="sect1" title="23.1. Locale Control"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp2602192"></a>23.1. Locale Control</h2></div></div></div><div class="sect2" title="23.1.1. The setlocale function"><div class="titlepage"><div><div><h3 class="title"><a name="idp2602928"></a>23.1.1. The setlocale function</h3></div></div></div><p><span class="bold"><strong>Synopsis</strong></span></p><pre class="CLexer"><div class="highlight"><pre><span class="cp">#include &lt;locale.h&gt;</span>
<span class="kt">char</span> <span class="o">*</span><span class="nf">setlocale</span><span class="p">(</span><span class="kt">int</span> <span class="n">category</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">locale</span><span class="p">);</span>
</pre></div>
</pre><p><span class="bold"><strong>Description</strong></span></p><p>The <code class="code">setlocale</code> function selects the appropriate portion
of the program's locale as specified by the category and locale arguments. The
<code class="code">setlocale</code> function may be used to change or query the programs
entire current locale or portions thereof. The value <code class="code">LC_ALL</code>
for category names the program's entire locale; the other values for category
name only a portion of the program's locale. <code class="code">LC_COLLATE</code>
affects the behavior of the <code class="code">strcoll</code> and
<code class="code">strxfrm</code> functions. <code class="code">eLC_CTYPE</code> affects the
behavior of the character handling functions<sup>[<a class="footnote" href="#ftn.idp2033952" name="idp2033952">166</a>]</sup> and the multibyte and wide
character functions. <code class="code">LC_MONETARY</code> affects the monetary
formatting information returned by the localeconv
function. <code class="code">LC_NUMERIC</code> affects the decimal-point character for
the formatted input/output functions and the string conversion functions, as
well as the nonmonetary formatting information returned by the
<code class="code">localeconv</code> function. <code class="code">LC_TIME</code> affects the
behavior of the <code class="code">strftime</code> and <code class="code">wcsftime</code>
functions.</p><p>A value of "C" for locale specifies the minimal environment for C
translation; a value of "" for locale specifies the locale-specific native
environment. Other implementation-defined strings may be passed as the second
argument to <code class="code">setlocale</code>.</p><p>At program startup, the equivalent of</p><pre class="CLexer"><div class="highlight"><pre><span class="n">setlocale</span><span class="p">(</span><span class="n">LC_ALL</span><span class="p">,</span> <span class="s">&quot;C&quot;</span><span class="p">);</span>
</pre></div>
</pre><p>is executed.</p><p>The implementation shall behave as if no library function calls the
<code class="code">setlocale</code> function.</p><p><span class="bold"><strong>Returns</strong></span></p><p>If a pointer to a string is given for <code class="code">locale</code> and the
selection can be honored, the <code class="code">setlocale</code> function returns a
pointer to the string associated with the specified category for the new
<code class="code">locale</code>. If the selection cannot be honored, the
<code class="code">setlocale</code> function returns a null pointer and the program's
<code class="code">locale</code> is not changed.</p><p>A null pointer for <code class="code">locale</code> causes the
<code class="code">setlocale</code> function to return a pointer to the string
associated with the category for the program's current <code class="code">locale</code>;
the program's <code class="code">locale</code> is not changed.</p><p>The pointer to string returned by the <code class="code">setlocale</code>
function is such that a subsequent call with that string value and its
associated category will restore that part of the program's
<code class="code">locale</code>. The string pointed to shall not be modified by the
program, but may be overwritten by a subsequent call to the
<code class="code">setlocale</code> function.</p></div></div><div class="sect1" title="23.2. Numeric formatting convention inquiry"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp2050544"></a>23.2. Numeric formatting convention inquiry</h2></div></div></div><div class="sect2" title="23.2.1. The localeconv function"><div class="titlepage"><div><div><h3 class="title"><a name="idp2051296"></a>23.2.1. The localeconv function</h3></div></div></div><p><span class="bold"><strong>Synopsis</strong></span></p><pre class="CLexer"><div class="highlight"><pre><span class="cp">#include &lt;locale.h&gt;</span>
<span class="k">struct</span> <span class="n">lconv</span> <span class="o">*</span><span class="nf">localeconv</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</pre></div>
</pre><p><span class="bold"><strong>Description</strong></span></p><p>The <code class="code">localeconv</code> function sets the components of an
object with type <code class="code">struct lconv</code> with values appropriate for the
formatting of numeric quantities (monetary and otherwise) according to the
rules of the current <code class="code">locale</code>.</p><p>The members of the structure with type <code class="code">char *</code> are
pointers to strings, any of which (except decimal_point) can point to "", to
indicate that the value is not available in the current <code class="code">locale</code>
or is of zero length. Apart from grouping and mon_grouping, the strings shall
start and end in the initial shift state. The members with type char are
nonnegative numbers, any of which can be <code class="code">CHAR_MAX</code> to indicate
that the value is not available in the current <code class="code">locale</code>. The
members include the following:</p><pre class="CLexer"><div class="highlight"><pre><span class="kt">char</span> <span class="o">*</span><span class="n">decimal_point</span>
</pre></div>
</pre><p>The decimal-point character used to format nonmonetary
quantities.</p><pre class="CLexer"><div class="highlight"><pre><span class="kt">char</span> <span class="o">*</span><span class="n">thousands_sep</span>
</pre></div>
</pre><p>The character used to separate groups of digits before the
decimal-point. character in formatted nonmonetary quantities.</p><pre class="CLexer"><div class="highlight"><pre><span class="kt">char</span> <span class="o">*</span><span class="n">grouping</span>
</pre></div>
</pre><p>A string whose elements indicate the size of each group of digits in
formatted nonmonetary quantities.</p><pre class="CLexer"><div class="highlight"><pre><span class="kt">char</span> <span class="o">*</span><span class="n">mon_decimal_point</span>
</pre></div>
</pre><p>The decimal-point used to format monetary quantities.</p><pre class="CLexer"><div class="highlight"><pre><span class="kt">char</span> <span class="o">*</span><span class="n">mon_thousands_sep</span>
</pre></div>
</pre><p>The separator for groups of digits before the decimal-point in
formatted monetary quantities.</p><pre class="CLexer"><div class="highlight"><pre><span class="kt">char</span> <span class="o">*</span><span class="n">mon_grouping</span>
</pre></div>
</pre><p>A string whose elements indicate the size of each group of digits in
formatted monetary quantities.</p><pre class="CLexer"><div class="highlight"><pre><span class="kt">char</span> <span class="o">*</span><span class="n">positive_sign</span>
</pre></div>
</pre><p>The string used to indicate a nonnegative-valued formatted monetary
quantity.</p><pre class="CLexer"><div class="highlight"><pre><span class="kt">char</span> <span class="o">*</span><span class="n">negative_sign</span>
</pre></div>
</pre><p>The string used to indicate a negative-valued formatted monetary
quantity.</p><pre class="CLexer"><div class="highlight"><pre><span class="kt">char</span> <span class="o">*</span><span class="n">currency_symbol</span>
</pre></div>
</pre><p>The local currency symbol applicable to the current locale.</p><pre class="CLexer"><div class="highlight"><pre><span class="kt">char</span> <span class="n">frac_digits</span>
</pre></div>
</pre><p>The number of fractional digits (those after the decimal-point) to be
displayed in a locally formatted monetary quantity.</p><pre class="CLexer"><div class="highlight"><pre><span class="kt">char</span> <span class="n">p_cs_precedes</span>
</pre></div>
</pre><p>Set to 1 or 0 if the <code class="code">currency_symbol</code> respectively
precedes or succeeds the value for a nonnegative locally formatted monetary
quantity.</p><pre class="CLexer"><div class="highlight"><pre><span class="kt">char</span> <span class="n">n_cs_precedes</span>
</pre></div>
</pre><p>Set to 1 or 0 if the <code class="code">currency_symbol</code> respectively
precedes or succeeds the value for a negative locally formatted monetary
quantity.</p><pre class="CLexer"><div class="highlight"><pre><span class="kt">char</span> <span class="n">p_sep_by_space</span>
</pre></div>
</pre><p>Set to a value indicating the separation of the
<code class="code">currency_symbol</code>, the sign string, and the value for a
nonnegative locally formatted monetary quantity.</p><pre class="CLexer"><div class="highlight"><pre><span class="kt">char</span> <span class="n">n_sep_by_space</span>
</pre></div>
</pre><p>Set to a value indicating the separation of the
<code class="code">currency_symbol</code>, the sign string, and the value for a negative
locally formatted monetary quantity.</p><pre class="CLexer"><div class="highlight"><pre><span class="kt">char</span> <span class="n">p_sign_posn</span>
</pre></div>
</pre><p>Set to a value indicating the positioning of the
<code class="code">positive_sign</code> for a nonnegative locally formatted monetary
quantity.</p><pre class="CLexer"><div class="highlight"><pre><span class="kt">char</span> <span class="n">n_sign_posn</span>
</pre></div>
</pre><p>Set to a value indicating the positioning of the
<code class="code">negative_sign</code> for a negative locally formatted monetary
quantity.</p><pre class="CLexer"><div class="highlight"><pre><span class="kt">char</span> <span class="o">*</span><span class="n">int_curr_symbol</span>
</pre></div>
</pre><p>The international currency symbol applicable to the current locale. The
first three characters contain the alphabetic international currency symbol in
accordance with those specified in ISO 4217. The fourth character (immediately
preceding the null character) is the character used to separate the
international currency symbol from the monetary quantity.</p><pre class="CLexer"><div class="highlight"><pre><span class="kt">char</span> <span class="n">int_frac_digits</span>
</pre></div>
</pre><p>The number of fractional digits (those after the decimal-point) to be
displayed in an internationally formatted monetary quantity.</p><pre class="CLexer"><div class="highlight"><pre><span class="kt">char</span> <span class="n">int_p_cs_precedes</span>
</pre></div>
</pre><p>Set to 1 or 0 if the <code class="code">int_curr_symbol</code> respectively
precedes or succeeds the value for a nonnegative internationally formatted
monetary quantity.</p><pre class="CLexer"><div class="highlight"><pre><span class="kt">char</span> <span class="n">int_n_cs_precedes</span>
</pre></div>
</pre><p>Set to 1 or 0 if the <code class="code">int_curr_symbol</code> respectively
precedes or succeeds the value for a negative internationally formatted
monetary quantity.</p><pre class="CLexer"><div class="highlight"><pre><span class="kt">char</span> <span class="n">int_p_sep_by_space</span>
</pre></div>
</pre><p>Set to a value indicating the separation of the
<code class="code">int_curr_symbol</code>, the sign string, and the value for a
nonnegative internationally formatted monetary quantity.</p><pre class="CLexer"><div class="highlight"><pre><span class="kt">char</span> <span class="n">int_n_sep_by_space</span>
</pre></div>
</pre><p>Set to a value indicating the separation of the
<code class="code">int_curr_symbol</code>, the sign string, and the value for a negative
internationally formatted monetary quantity.</p><pre class="CLexer"><div class="highlight"><pre><span class="kt">char</span> <span class="n">int_p_sign_posn</span>
</pre></div>
</pre><p>Set to a value indicating the positioning of the
<code class="code">positive_sign</code> for a nonnegative internationally formatted
monetary quantity.</p><pre class="CLexer"><div class="highlight"><pre><span class="kt">char</span> <span class="n">int_n_sign_posn</span>
</pre></div>
</pre><p>Set to a value indicating the positioning of the
<code class="code">negative_sign</code> for a negative internationally formatted
monetary quantity.</p><p>The elements of grouping and mon_grouping are interpreted according to
the following:</p><div class="blockquote"><blockquote class="blockquote"><p><code class="code">CHAR_MAX</code> No further grouping is to be
performed.</p><p>0 The previous element is to be repeatedly used for the remainder of the
digits.</p><p><span class="italic">other</span> The integer value is the
number of digits that compose the current group.</p><p>The next element is examined to determine the size of the next group of
digits before the current group.</p></blockquote></div><p>The values of <code class="code">p_sep_by_space, n_sep_by_space,
int_p_sep_by_space</code> and <code class="code">int_n_sep_by_space</code> are
interpreted according to the following:</p><div class="blockquote"><blockquote class="blockquote"><p>0 No space separates the currency symbol and value.</p><p>1 If the currency symbol and sign string are adjacent, a space
  separates them from the value; otherwise, a space separates the currency
  symbol from the value.</p><p>2 If the currency symbol and sign string are adjacent, a space
  separates them; otherwise, a space separates the sign string from the
  value.</p></blockquote></div><p>For <code class="code">int_p_sep_by_space</code> and
<code class="code">int_n_sep_by_space</code>, the fourth character of
<code class="code">int_curr_symbol</code> is used instead of a space.</p><p>The values of <code class="code">p_sign_posn, n_sign_posn,
int_p_sign_posn</code> and <code class="code">int_n_sign_posn</code> are interpreted
according to the following:</p><div class="blockquote"><blockquote class="blockquote"><p>0 Parentheses surround the quantity and currency symbol.</p><p>1 The sign string precedes the quantity and currency symbol.</p><p>2 The sign string succeeds the quantity and currency symbol.</p><p>3 The sign string immediately precedes the currency symbol.</p><p>4 The sign string immediately succeeds the currency symbol.</p></blockquote></div><p>The implementation shall behave as if no library function calls the
<code class="code">localeconv</code> function.</p><p><span class="bold"><strong>Returns</strong></span></p><p>The <code class="code">localeconv</code> function returns a pointer to the
filled-in object. The structure pointed to by the return value shall not be
modified by the program, but may be overwritten by a subsequent call to the
<code class="code">localeconv</code> function. In addition, calls to the setlocale
function with categories <code class="code">LC_ALL, LC_MONETARY</code> or
<code class="code">LC_NUMERIC</code> may overwrite the contents of the
structure.</p><p>Please refer to three tables in specification for reference examples.</p></div></div><div class="footnotes"><br/><hr align="left" width="100"/><div class="footnote"><p><sup>[<a class="para" href="#idp2600992" id="ftn.idp2600992">165</a>] </sup>ISO/IEC 9945-2 specifies locale and charmap
formats that may be used to specify locales for C.</p></div><div class="footnote"><p><sup>[<a class="para" href="#idp2033952" id="ftn.idp2033952">166</a>] </sup>The only
functions in Character Handling &lt;ctype.h> whose behavior is not affected
by the current locale are <code class="code">isdigit</code> and
<code class="code">isxdigit</code>.</p></div></div></div><div class="navfooter"><hr/><table summary="Navigation footer" width="100%"><tr><td align="left" width="40%"><a accesskey="p" href="../limits/index.html">Prev</a> </td><td align="center" width="20%"> </td><td align="right" width="40%"> <a accesskey="n" href="../math/index.html">Next</a></td></tr><tr><td align="left" valign="top" width="40%">Chapter 22. Sizes of integer types &lt;limits.h> </td><td align="center" width="20%"><a accesskey="h" href="../index.html">Home</a></td><td align="right" valign="top" width="40%"> Chapter 24. Mathematics &lt;math.h></td></tr></table></div><p style="text-align: center;" xmlns:d="http://docbook.org/ns/docbook" xmlns:exsl="http://exslt.org/common" xmlns:fo="http://www.w3.org/1999/XSL/Format">© 2010, 2013 Shiv S. Dayal. <a href="http://libreprogramming.org">libreprogramming.org</a>.
    GNU FDL license is applicable where not stated.</p></body></html>