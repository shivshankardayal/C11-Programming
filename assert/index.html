<html><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"><title>Chapter 14. Diagnostics &lt;assert.h></title><link href="../../css/style.css" rel="stylesheet" type="text/css"><meta content="DocBook XSL-NS Stylesheets V1.76.1" name="generator"><link href="../index.html" rel="home" title="C Programming with C99"><link href="../index.html" rel="up" title="C Programming with C99"><link href="../std/index.html" rel="prev" title="Chapter 13. The C Standard Library"><link href="../complex/index.html" rel="next" title="Chapter 15. Complex arithmetic &lt;complex.h>"><script src="../css/analytics.js" type="text/javascript" xmlns:d="http://docbook.org/ns/docbook" xmlns:exsl="http://exslt.org/common" xmlns:fo="http://www.w3.org/1999/XSL/Format"></script></link></link></link></link></meta></link></meta></head><body alink="#0000FF" bgcolor="white" link="#0000FF" text="black" vlink="#840084"><div class="navheader"><table summary="Navigation header" width="100%"><tr><th align="center" colspan="3">Chapter 14. Diagnostics &lt;assert.h></th></tr><tr><td align="left" width="20%"><a accesskey="p" href="../std/index.html">Prev</a> </td><th align="center" width="60%"> </th><td align="right" width="20%"> <a accesskey="n" href="../complex/index.html">Next</a></td></tr></table><hr/></div><div class="chapter" title="Chapter 14. Diagnostics &lt;assert.h>"><div class="titlepage"><div><div><h2 class="title"><a name="idp34535536"></a>Chapter 14. Diagnostics &lt;assert.h></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="index.html#idp33150832">14.1. Program Diagnostics</a></span></dt><dd><dl><dt><span class="sect2"><a href="index.html#idp33151536">14.1.1. The assert Macro</a></span></dt></dl></dd></dl></div><p>The header <code class="code">&lt;assert.h></code> defines the assert
    macro and refers to another macro, <code class="code">NDEBUG</code> which is not
    defined by code <code class="code">&lt;assert.h></code>. If
    <code class="code">NDEBUG</code> is defined as a macro name at the point in the
    source file where <code class="code">&lt;assert.h></code> is included, the
    <code class="code">assert</code> macro is defined simply as:</p><pre class="CLexer"><div class="highlight"><pre><span class="cp">#define assert(ignore) ((void)0)</span>
</pre></div>
</pre><p>The <code class="code">assert</code> macro is redefined according to the current
state of <code class="code">NDEBUG</code> each time that
<code class="code">&lt;assert.h></code> is included.</p><p>The  Macro<code class="code">assert</code> shall be implemented as a macro, not
as an actual function. If the macro definition is suppressed in order to access
an actual function, the behavior is undefined.</p><div class="sect1" title="14.1. Program Diagnostics"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp33150832"></a>14.1. Program Diagnostics</h2></div></div></div><div class="sect2" title="14.1.1. The assert Macro"><div class="titlepage"><div><div><h3 class="title"><a name="idp33151536"></a>14.1.1. The assert Macro</h3></div></div></div><p><span class="bold"><strong>Synopsis</strong></span></p><pre class="CLexer"><div class="highlight"><pre><span class="cp">#include &lt;assert.h&gt;</span>
<span class="kt">void</span> <span class="n">assert</span><span class="p">(</span><span class="n">scalar</span> <span class="n">expression</span><span class="p">);</span>
</pre></div>
</pre><p><span class="bold"><strong>Description</strong></span></p><p>The <code class="code">assert</code> macro puts diagnostic tests into programs;
it expands to a <code class="code">void</code> expression. When it is executed, if
expression (which shall have a scalar type) is <code class="code">false</code> (that is,
compares equal to 0), the <code class="code">eassert</code> macro writes information
about the particular call that failed (including the text of the argument, the
name of the source file, the source line number, and the name of the enclosing
function - the latter are respectively the values of the preprocessing macros
<code class="code">e__FILE__</code> and <code class="code"></code> and of the identifier
<code class="code">__func__</code>) on the standard error stream in an
implementation-defined format. It then calls the <code class="code">abort</code>
function.</p><p><span class="bold"><strong>Returns</strong></span></p><p>The <code class="code">assert</code> macro returns no value.</p><p><span class="bold"><strong>Forward references:</strong></span> the
<code class="code">abort</code> function (20.4.1).</p><p><span class="bold"><strong>Synopsis</strong></span></p><pre class="CLexer"><div class="highlight"><pre><span class="cp">#include &amp;lt;assert.h&gt;</span>
<span class="kt">void</span> <span class="n">assert</span><span class="p">(</span><span class="n">scalar</span> <span class="n">expression</span><span class="p">);</span>
</pre></div>
</pre><p><span class="bold"><strong>Description</strong></span></p><p>If the macro <code class="code">NDEBUG</code> was defined at the moment
&lt;assert.h> was last included, the macro <code class="code">assert()</code>
generates no code, and hence does nothing at all. Otherwise, the macro
<code class="code">assert()</code> prints an error message to standard error and
terminates the program by calling <code class="code">abort</code> if expression is false
(i.e., compares equal to zero).</p><p>The purpose of this macro is to help the programmer find bugs in his
program. The message "assertion failed in file foo.c, function do_bar(), line
1287" is of no help at all to a user.</p><p><span class="bold"><strong>Return Value</strong></span></p><p>No value is returned.</p><p>In C89, expression is required to be of type int and undefiend behavior
results if it is not, but in C99 it may have scalar type.</p><p><code class="code">assert()</code> is implemented as a macro; if the expression
tested hasside-effects, program behavior will be different depending on whether
<code class="code">NDEBUG</code> is defined. This may create Heisenbugs which go away
whendebugging is turned on.</p><p><span class="bold"><strong>Example</strong></span></p><pre class="CLexer"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="cp">#include &lt;assert.h&gt;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">assert</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Not gonna happen!&quot;</span><span class="p">);</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</pre>
and the output is:
<pre class="screen">a.out: test.c:5: int main(): Assertion `0' failed.
Aborted (core dumped)</pre><p>You should replace 0 inside assert() by the expression to be
tested.</p></div></div></div><div class="navfooter"><hr><table summary="Navigation footer" width="100%"><tr><td align="left" width="40%"><a accesskey="p" href="../std/index.html">Prev</a> </td><td align="center" width="20%"> </td><td align="right" width="40%"> <a accesskey="n" href="../complex/index.html">Next</a></td></tr><tr><td align="left" valign="top" width="40%">Chapter 13. The C Standard Library </td><td align="center" width="20%"><a accesskey="h" href="../index.html">Home</a></td><td align="right" valign="top" width="40%"> Chapter 15. Complex arithmetic &lt;complex.h></td></tr></table></hr></div><p style="text-align: center;" xmlns:d="http://docbook.org/ns/docbook" xmlns:exsl="http://exslt.org/common" xmlns:fo="http://www.w3.org/1999/XSL/Format">© 2010, 2013 Shiv S. Dayal. <a href="http://libreprogramming.org">libreprogramming.org</a>.
   GNU FDL license is applicable where not stated.</p></body></html>
