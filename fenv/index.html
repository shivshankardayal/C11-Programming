<html><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><title>Chapter 18. Floating-point environment &lt;fenv.h></title><link href="../../css/style.css" rel="stylesheet" type="text/css"/><meta content="DocBook XSL-NS Stylesheets V1.76.1" name="generator"/><link href="../index.html" rel="home" title="C Programming with C99"/><link href="../index.html" rel="up" title="C Programming with C99"/><link href="../errno/index.html" rel="prev" title="Chapter 17. Errors &lt;errno.h>"/><link href="../ix01.html" rel="next" title="Index"/><script src="../css/analytics.js" type="text/javascript" xmlns:d="http://docbook.org/ns/docbook" xmlns:exsl="http://exslt.org/common" xmlns:fo="http://www.w3.org/1999/XSL/Format"></script></head><body alink="#0000FF" bgcolor="white" link="#0000FF" text="black" vlink="#840084"><div class="navheader"><table summary="Navigation header" width="100%"><tr><th align="center" colspan="3">Chapter 18. Floating-point environment &lt;fenv.h></th></tr><tr><td align="left" width="20%"><a accesskey="p" href="../errno/index.html">Prev</a> </td><th align="center" width="60%"> </th><td align="right" width="20%"> <a accesskey="n" href="../ix01.html">Next</a></td></tr></table><hr/></div><div class="chapter" title="Chapter 18. Floating-point environment &lt;fenv.h>"><div class="titlepage"><div><div><h2 class="title"><a name="idp2248304"></a>Chapter 18. Floating-point environment &lt;fenv.h></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="index.html#idp2481984">18.1. The FENV_ACCESS pragma</a></span></dt></dl></div><p>The header &lt;fenv.h> declares two types and several macros
    and functions to provide access to the floating-point environment. The
    floating-point environment refers collectively to any floating-point status
    flags and control modes supported by the
    implementation.<sup>[<a class="footnote" href="#ftn.idp1675664" name="idp1675664">152</a>]</sup> A floating-point status flag is a system
    variable whose value is set (but never cleared) when a floating-point
    exception is raised, which occurs as a side effect of exceptional
    floating-point arithmetic to provide auxiliary information. A
    floating-point control mode is a system variable whose value may be set by
    the user to affect the subsequent behavior of floating-point
    arithmetic.</p><p>Certain programming conventions support the intended model of use
    for the floating-point environment:<sup>[<a class="footnote" href="#ftn.idp1677440" name="idp1677440">153</a>]</sup></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>a function call does not alter its caller's floating-point
	control modes, clear its caller’s floating-point status flags, nor
	depend on the state of its caller’s floating-point status flags unless
	the function is so documented;</p></li><li class="listitem"><p>a function call is assumed to require default floating-point
	control modes, unless its documentation promises otherwise;</p></li><li class="listitem"><p>a function call is assumed to have the potential for raising
	floating-point exceptions, unless its documentation promises
	otherwise.</p></li></ul></div><p>The type <code class="code">fenv_t</code> represents the entire
    floating-point environment.</p><p>The type <code class="code">fexcept_t</code> represents the floating-point
    status flags collectively, including any status the implementation
    associates with the flags.</p><p>Each of the macros:</p><div class="blockquote"><blockquote class="blockquote"><p>FE_DIVBYZERO FE_INEXACT FE_INVALID FE_OVERFLOW FE_UNDERFLOW</p></blockquote></div><p>is defined if and only if the implementation supports the
floating-point exception by means of the functions in
13.6.2.<sup>[<a class="footnote" href="#ftn.idp2520080" name="idp2520080">154</a>]</sup> Additional
implementation-defined floating-point exceptions, with macro definitions
beginning with <code class="code">FE_</code> and an uppercase letter, may also be
specified by the implementation. The defined macros expand to integer constant
expressions with values such that bitwise <code class="code">OR</code>s of all
combinations of the macros result in distinct values.</p><p>The macro <code class="code">FE_ALL_EXCEPT</code> is simply the bitwise
<code class="code">OR</code> of all floating-point exception macros defined by the
implementation. If no such macros are defined, <code class="code">FE_ALL_EXCEPT</code>
shall be defined as 0.</p><p>Each of the macros:</p><pre class="screen">FE_DOWNWARD
FE_TONEAREST
FE_TOWARDZERO
FE_UPWARD</pre><p>is defined if and only if the implementation supports getting and
setting the represented rounding direction by means of the fegetround and
fesetround functions. Additional implementation-defined rounding directions,
with macro definitions beginning with FE_ and an uppercase letter, may also be
specified by the implementation. The defined macros expand to integer constant
expressions whose values are distinct nonnegative
values.<sup>[<a class="footnote" href="#ftn.idp2525424" name="idp2525424">155</a>]</sup></p><p>The macro <code class="code">FE_DFL_ENV</code> represents the default
floating-point environment - the one installed at program startup - and has
type "pointer to const-qualified <code class="code">fenv_t</code>”. It can be used as an
argument to &lt;fenv.h> functions that manage the floating-point
environment.</p><p>Additional implementation-defined environments, with macro definitions
beginning with <code class="code">FE_</code> and an uppercase letter, and having type
"pointer to const-qualified <code class="code">fenv_t</code>", may also be specified by
the implementation.</p><div class="sect1" title="18.1. The FENV_ACCESS pragma"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp2481984"></a>18.1. The FENV_ACCESS pragma</h2></div></div></div><p><span class="bold"><strong>Synopsis</strong></span></p><pre class="CLexer"><div class="highlight"><pre><span class="cp">#include &lt;fenv.h&gt;</span>
<span class="cp">#pragma STDC FENV_ACCESS on-off-switch</span>
</pre></div>
</pre><p><span class="bold"><strong>Description</strong></span></p><p>The <code class="code">FENV_ACCESS</code> pragma provides a means to inform the
implementation when a program might access the floating-point environment to
test floating-point status flags or run under non-default floating-point
control modes.<sup>[<a class="footnote" href="#ftn.idp2486112" name="idp2486112">156</a>]</sup> The
pragma shall occur either outside external declarations or preceding all
explicit declarations and statements inside a compound statement. When outside
external declarations, the pragma takes effect from its occurrence until
another <code class="code">FENV_ACCESS</code>pragma is encountered, or until the end of
the translation unit. When inside a compound statement, the pragma takes effect
from its occurrence until another <code class="code">FENV_ACCESS</code> pragma is
encountered (including within a nested compound statement), or until the end of
the compound statement; at the end of a compound statement the state for the
pragma is restored to its condition just before the compound statement. If this
pragma is used in any other context, the behavior is undefined. If part of a
program tests floating-point status flags, sets floating-point control modes,
or runs under non-default mode settings, but was translated with the state for
the <code class="code">FENV_ACCESS</code> pragma "off", the behavior is undefined. The
default state ("on" or "off") for the pragma is implementation-defined. (When
execution passes from a part of the program translated with
<code class="code">FENV_ACCESS</code> "off" to a part translated with
<code class="code">FENV_ACCESS</code> "on", the state of the floating-point status flags
is unspecified and the floating-point control modes have their default
settings.)</p></div><div class="footnotes"><br/><hr align="left" width="100"/><div class="footnote"><p><sup>[<a class="para" href="#idp1675664" id="ftn.idp1675664">152</a>] </sup>This header is designed to support the
    floating-point exception status flags and directed-rounding control modes
    required by IEC 60559, and other similar floating-point state
    information. Also it is designed to facilitate code portability among all
    systems.</p></div><div class="footnote"><p><sup>[<a class="para" href="#idp1677440" id="ftn.idp1677440">153</a>] </sup>With these
    conventions, a programmer can safely assume default floating-point control
    modes (or be unaware of them). The responsibilities associated with
    accessing the floating-point environment fall on the programmer or program
    that does so explicitly.</p></div><div class="footnote"><p><sup>[<a class="para" href="#idp2520080" id="ftn.idp2520080">154</a>] </sup>The implementation supports an exception if there
are circumstances where a call to at least one of the functions in 13.6.2,
using the macro as the appropriate argument, will succeed. It is not necessary
for all the functions to succeed all the time.</p></div><div class="footnote"><p><sup>[<a class="para" href="#idp2525424" id="ftn.idp2525424">155</a>] </sup>Even though the rounding direction macros may expand
to constants corresponding to the values of <code class="code">FLT_ROUNDS</code>, they
are not required to do so.</p></div><div class="footnote"><p><sup>[<a class="para" href="#idp2486112" id="ftn.idp2486112">156</a>] </sup>The purpose of the
<code class="code">FENV_ACCESS</code> pragma is to allow certain optimizations that
could subvert flag tests and mode changes (e.g., global common subexpression
elimination, code motion, and constant folding). In general, if the state of
<code class="code">FENV_ACCESS</code> is "off", the translator can assume that default
modes are in effect and the flags are not tested.</p></div></div></div><div class="navfooter"><hr/><table summary="Navigation footer" width="100%"><tr><td align="left" width="40%"><a accesskey="p" href="../errno/index.html">Prev</a> </td><td align="center" width="20%"> </td><td align="right" width="40%"> <a accesskey="n" href="../ix01.html">Next</a></td></tr><tr><td align="left" valign="top" width="40%">Chapter 17. Errors &lt;errno.h> </td><td align="center" width="20%"><a accesskey="h" href="../index.html">Home</a></td><td align="right" valign="top" width="40%"> Index</td></tr></table></div><p style="text-align: center;" xmlns:d="http://docbook.org/ns/docbook" xmlns:exsl="http://exslt.org/common" xmlns:fo="http://www.w3.org/1999/XSL/Format">© 2010, 2013 Shiv S. Dayal. <a href="http://libreprogramming.org">libreprogramming.org</a>.
   GNU FDL license is applicable where not stated.</p></body></html>